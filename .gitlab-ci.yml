image: scorpil/rust:nightly

stages:
  - test
  - build

'Tests':
  stage: test
  script:
    - cargo test

'Build Debug':
  stage: build
  script:
    - cargo build
  artifacts:
    name: "musicpi-display-${CI_BUILD_REF_NAME}-debug"
    paths:
      - target/debug/*

'Build Release':
  stage: build
  script:
    - cargo build --release
  artifacts:
    name: "musicpi-display-${CI_BUILD_REF_NAME}-release"
    paths:
      - target/release/*

'Build Documentation':
  stage: build
  script:
    - cargo doc
  artifacts:
    name: "musicpi-display-${CI_BUILD_REF_NAME}-doc"
    paths:
      - target/doc/*
